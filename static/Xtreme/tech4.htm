<html>

<head>

<title> קודגורו אקסטרים - טכניקות מתקדמות</title>
<meta name="keywords" content="competition, computers, hebrew, תחרות, תחרות מחשבים, פרסים, מתמטיקה, וויצמן, ויצמן, מכון ויצמן, מכון וויצמן, המרכז הבינתחומי, בינתחומי, צמ&quot;ד, חינם">
<meta name="description" content="תחרות המחשבים והמתמטיקה המובילה בישראל לצעירים. קחו חלק באתגר וזכו בפרסים יקרי ערך.">
<LINK REL=STYLESHEET HREF="cgx.css" TYPE="text/css">




<script src="js/google_analytics.js"></script>
</head>
<body>

<div align="center">
<div class="pagebox">

<div class="top">
<br>


<div id="navcontainer">
<ul id="navlist">
<li><a href="/CS/forums/5/ShowForum.aspx">הפורום</a></li>
<li><a href="media.htm">בתקשורת</a></li>
<li><a href="archive.htm">ארכיון</a></li>
<li><a href="tech.htm">המדריך</a></li>
<li><a href="about.htm">על התחרות</a></li>
</ul>
</div>

</div>




<div class="tohen">

<h1 class="bodtite">טכניקות מתקדמות</h1>
<p>בעמוד זה מפורטות טכניקות מתקדמות במשחק: טכניקות שאינן דרושות כדי לכתוב שורד בסיסי, אך בעלות פוטנציאל לתת יתרון משמעותי למי שיעשה בהן שימוש נבון.</p>

<h1 class="bodtite">שיתוף פעולה בין שורדים</h1>
<p>
מנוע המשחק מאפשר לכל צוות להכניס לתחרות שני שורדים שונים בו-זמנית, כך שניקוד הצוות יקבע לניקוד המצטבר של שני השורדים ביחד.
</p>
<p>
שני השורדים נפרדים לכל דבר ועניין - אוגרים, מחסנית, זמן מעבד - אך מובטח שתמיד יטענו יחדיו לזירה (במקומות אקראיים, כמובן).  תוכלו לראות את החלק היחסי של כל שורד בניקוד הצוותי בגרף העמודות של ניקוד הצוותים: עמודת הניקוד של הצוות מחולקת לשני צבעים.
</p>
<p>
כדי לאפשר לשני השורדים לשתף ביניהם אינפורמציה בצורה חשאית (מבלי ששורדים של צוותים אחרים יוכלו לראות אותה), המנוע מגדיר לכל צוות בלוק זיכרון "צוותי" של 1024 בתים, המתחיל בכתובת ES:0000.
</p>
<p>
על מנת שמנוע המשחק ידע ששני שורדים שייכים לאותה קבוצה, יש לקרוא להם בשמות מתאימים. לדוגמא: קבוצה בשם rocky תקרא לשורדים בשמות rocky1 ו-rocky2 בהתאמה (אלה יהיו שמות הקבצים של השורדים כפי שיופיעו בספריה survivors, ללא סיומת קובץ!)
</p>

<h1 class="bodtite">האצת השורד</h1>
<p>
במצב רגיל, מנוע המשחק יריץ בכל סיבוב אופקוד בודד של כל שורד. המנוע מאפשר לשורדים לקבל זמן מעבד רב יותר, ע"י שימוש באופקוד מיוחד.
</p>

<p>
לכל שורד מוגדר אוגר וירטואלי בשם Energy, בגודל 16 ביט. הערך ההתחלתי של האוגר הוא אפס, ובכל 5 סיבובים מנוע המשחק מחסיר 1 מערכו (אם היה אפס, נשאר אפס).
</p>
<p>
שורדים יכולים להגדיל את ערך האוגר ע"י שימוש באופקוד ייעודי: קריאה לאופקוד WAIT בדיוק ארבע פעמים ברציפות (ז"א 4 פעמים הבית 09Bh). מנוע המשחק מזהה זאת כאופקוד הוירטואלי NRG ומתייחס אליו כאל אופקוד בודד מבחינת זמן ריצה.
</p>
<p>
שימו לב שהאופקוד WAIT (המקורי) מוגדר עדיין כאופקוד בלתי נתמך. ז"א, קריאה אליו פעם אחת (או שתיים, או שלוש) תגרום לשורד למות.
</p>
<p>
כל קריאה לאופקוד NRG תגדיל את ערך האוגר Energy ב-1. "מהירות" השורד מחושבת בתחילת כל סיבוב עפ"י הנוסחא הבאה:
</p>
<p>
Speed = log2(energy) + 1
</p>
<p>
אם Energy היה אפס, גם המהירות תהיה אפס. בכל מקרה, המהירות תהיה בטווח 0-16.
</p>
<p>
עפ"י מהירות השורד, המנוע יקבע האם להריץ אופקוד <b>נוסף</b> שלו:  נניח המהירות היא 5, המשמעות היא שבסיכוי 5/16 השורד יקבל אופקוד נוסף באותו סיבוב. ז"א, המנוע יריץ לפחות אופקוד אחד של השורד, ולכל היותר שניים.
</p>

<h1 class="bodtite">פצצות חכמות</h1>
<p>
מנוע המשחק תומך בשני אופקודים וירטואליים, בנוסף לאופקוד הוירטואלי NRG (שתואר בסעיף הקודם).
</p>
<p>
האופקוד הראשון הוא INT 0x86 (ז"א רצף הבתים 0CDh 086h), והוא מאפשר "הפצצה כבדה" של איזור בזיכרון. כאשר האופקוד נקרא, מנוע המשחק יכתוב 64 פעמים את DX:AX לכתובת המתחילה ב-ES:DI (ובסה"כ יכתבו 256 בתים). הבתים יכתבו לפי הסדר הבא: AL, אח"כ AH, אח"כ DL ולבסוף DH - וחוזר חלילה. בדומה לאופקוד stosw, כיוון הכתיבה (קדימה או אחורה) נקבע לפי ערך ה-direction flag, וערכם של ES:DI לאחר הקריאה משתנה בהתאם.
</p>
<p>
האופקוד השני הוא INT 0x87 (ז"א רצף הבתים 0CDh 087h), והוא מאפשר "הפצצה חכמה" של איזור בזיכרון. כאשר האופקוד נקרא, מנוע המשחק מחפש את ההופעה הראשונה בסגמנט של 4 הבתים DX:AX, החל מהכתובת ES:DI (חיפוש הבתים הוא לפי הסדר הבא: AL, אח"כ AH, אח"כ DL ולבסוף DH). במידה והבתים נמצאו, המנוע יכתוב במקומם את 4 הבתים CX:BX. כיוון החיפוש בתוך הסגמנט (קדימה או אחורה) נקבע לפי ערך ה-direction flag, אך ערכם של ES:DI לא משתנה בכל מקרה (כך שלא ניתן לדעת באיזו כתובת נמצאו הבתים, ואפילו האם נמצאו בכלל). כאמור, האופקוד פועל רק על רצף הבתים הראשון שנמצא.
</p>
<p>
חשוב לציין כי על שני האופקודים חלות אותן מגבלות שחלות על כל גישה לזיכרון, ז"א הקריאה והכתיבה מותרות רק בסגמנט הזירה, במחסנית האישית של השורד או בזיכרון הקבוצתי המשותף.
</p>
<p>
השימוש בשני האופקודים מוגבל למספר פעמים לכל שורד: כל שורד יכול להשתמש ב-2 הפצצות כבדות ובהפצצה חכמה אחת בכל סיבוב (ההגבלה היא לכל שורד, ולא לכל קבוצה). שימוש באופקוד מעבר לכך אינו עושה דבר - פעולה זו אינה מוגדרת כבלתי חוקית ולכן השורד לא יפסל, אך לקריאה לא תהיה כל השפעה.
</p>
<ul style="width:330px;"></ul>






</div>


<div class="sidebar">
<center>
<img src="bug2.jpg" width="200" height="111"></center>

<!-- 
<h1 class="sidetite">נפתחה ההרשמה!</h1>
<p class="sidebartext">
נפתחה ההרשמה לאקסטרים 2010! על מנת להרשם לתחרות 
<a href="cgxreg.asp">מלאו את טופס ההשתתפות</a>  הנרשמים יקבלו אישור הרשמה במייל. 
</span>
-->

<h1 class="sidetite">שורדי האקסטרים</h1>
<p class="sidebartext">
 העיפו מבט 
<a href="https://github.com/codeguru-il/corewars8086-survivors" style="text-decoration: none;">בשורדים של התחרויות הקודמות</a>
 לרעיונות מעניינים לאסטרטגיה.
</span>
</div>


</div>



</div>

</body>
</html>
